{
  "version": 3,
  "sources": ["../../../src/lib/const/tools.ts"],
  "sourcesContent": ["import { Dataitem } from '../classes/data-item';\nimport {\n    ChangeTypeOfPageItem,\n    IconEntryType,\n    PageItemDataitems,\n    TextEntryType,\n    ValueEntryType,\n} from '../types/type-pageItem';\nimport { ChangeTypeOfKeys } from './definition';\nimport { Library } from '../classes/library';\nimport { RGB } from '../types/Color';\nimport { White, hsv2rgb, rgb_dec565 } from './Color';\n\nexport async function getValueEntryNumber(\n    i: ChangeTypeOfPageItem<ValueEntryType, Dataitem | undefined>,\n): Promise<number | null> {\n    if (!i) return null;\n    const nval = i.value && (await i.value.getNumber());\n    if (nval !== null && nval !== undefined) {\n        return nval * ((i.factor && (await i.factor.getNumber())) ?? 1);\n    }\n    return null;\n}\n\nexport async function getIconEntryValue(\n    i: ChangeTypeOfPageItem<IconEntryType, Dataitem | undefined>,\n    on: boolean,\n    def: string,\n    defOff: string | null = null,\n): Promise<string> {\n    if (!i) return on ? def : defOff ?? def;\n    const icon = i.true.value && (await i.true.value.getString());\n    if (!on) {\n        return (i.false.value && (await i.false.value.getString())) ?? defOff ?? icon ?? def;\n    }\n    return icon ?? def;\n}\nexport async function getIconEntryColor(\n    i: ChangeTypeOfPageItem<IconEntryType, Dataitem | undefined>,\n    on: boolean,\n    def: string | number | RGB,\n): Promise<string> {\n    if (typeof def === 'number') def = String(def);\n    else if (typeof def !== 'string') def = String(rgb_dec565(def));\n    if (!i) return def;\n    const icon = i.true.color && (await i.true.color.getRGBDec());\n    if (!on) {\n        return (i.false.color && (await i.false.color.getRGBDec())) ?? icon ?? def;\n    }\n    return icon ?? def;\n}\nexport async function getValueEntryTextOnOff(\n    i: ChangeTypeOfKeys<TextEntryType, Dataitem | undefined> | undefined,\n    on: boolean,\n): Promise<string | null> {\n    if (!i) return null;\n    const value = i.true && (await i.true.getString());\n    if (!on) {\n        return (i.false && (await i.false.getString())) ?? value ?? null;\n    }\n    return value ?? null;\n}\n\nexport async function getValueEntryBoolean(\n    i: ChangeTypeOfPageItem<ValueEntryType, Dataitem | undefined> | undefined,\n): Promise<boolean | null> {\n    if (!i) return null;\n    const nval = i.value && (await i.value.getBoolean());\n    if (nval !== undefined) {\n        return nval;\n    }\n    return null;\n}\n\nexport async function getValueEntryString(\n    i: ChangeTypeOfPageItem<ValueEntryType, Dataitem | undefined> | undefined,\n): Promise<string | null> {\n    if (!i || !i.value) return null;\n    const nval = await i.value.getNumber();\n    if (nval !== null && nval !== undefined) {\n        const res = nval * ((i.factor && (await i.factor.getNumber())) ?? 1);\n\n        const d = i.decimal && (await i.decimal.getNumber());\n        let result: string = String(res);\n        if (d || d === 0) {\n            result = res.toFixed(d);\n        }\n        return result + ((i.unit && (await i.unit.getString())) ?? '');\n    }\n    const res = await i.value.getString();\n    if (res != null) res + ((i.unit && (await i.unit.getString())) ?? '');\n    return res;\n}\n\nexport function getTranslation(library: Library, key1: any | string, key2?: string): string {\n    let result = key2 ?? key1;\n    if (key2 !== undefined) {\n        result = library.getLocalTranslation(key1, key2);\n    }\n    result = library.getTranslation(result || key1);\n    return result;\n}\n\nexport const getDecfromRGBThree = async (item: PageItemDataitems): Promise<string | null> => {\n    if (!item) return String(rgb_dec565(White));\n    const red = (item.data.Red && (await item.data.Red.getNumber())) ?? -1;\n    const green = (item.data.Green && (await item.data.Green.getNumber())) ?? -1;\n    const blue = (item.data.Blue && (await item.data.Blue.getNumber())) ?? -1;\n    if (red === -1 || blue === -1 || green === -1) return null;\n    return String(rgb_dec565({ red, green, blue }));\n};\n\nexport const getDecfromHue = async (item: PageItemDataitems): Promise<string | null> => {\n    if (!item || !item.data.hue) return null;\n    const hue = await item.data.hue.getNumber();\n    let saturation = Math.abs((item.data.saturation && (await item.data.saturation.getNumber())) ?? 1);\n    if (saturation > 1) saturation = 1;\n    if (hue === null) return null;\n    const arr = hsv2rgb(hue, saturation, 1);\n    return String(rgb_dec565({ red: arr[0], green: arr[1], blue: arr[2] }));\n};\n"],
  "mappings": "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",
  "names": ["import_Color", "res"]
}
