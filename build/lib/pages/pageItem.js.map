{
  "version": 3,
  "sources": ["../../../src/lib/pages/pageItem.ts"],
  "sourcesContent": ["import * as Color from '../const/Color';\nimport { PageItemInterface } from '../classes/Page';\nimport {\n    PageItemDataItems,\n    MessageItem,\n    entityUpdateDetailMessage,\n    PageItemDataItemsOptions,\n    listCommand,\n    islistCommandUnion,\n} from '../types/type-pageItem';\nimport * as tools from '../const/tools';\nimport { PopupType } from '../types/types';\nimport { Panel } from '../controller/panel';\nimport { BaseClassTriggerd } from '../controller/states-controller';\nimport { RGB } from '../types/Color';\n\n//light, shutter, delete, text, button, switch, number,input_sel, timer und fan types\nexport class PageItem extends BaseClassTriggerd {\n    defaultOnColor = Color.White;\n    defaultOffColor = Color.Blue;\n    config: PageItemDataItemsOptions | undefined;\n    dataItems: PageItemDataItems | undefined;\n    panel: Panel;\n    id: string;\n    lastPopupType: PopupType | undefined = undefined;\n    constructor(config: Omit<PageItemInterface, 'pageItemsConfig'>, options: PageItemDataItemsOptions | undefined) {\n        super({ ...config });\n        this.panel = config.panel;\n        this.id = config.id;\n        this.config = options;\n        this.parent = options && config.parent;\n    }\n\n    async init(): Promise<void> {\n        if (!this.config) return;\n        const config = { ...this.config };\n        // search states for mode auto\n        const tempConfig: Partial<PageItemDataItemsOptions['data']> =\n            this.config.initMode === 'auto' && this.config.dpInit\n                ? await this.panel.statesControler.getDataItemsFromAuto(this.config.dpInit, config.data)\n                : config.data;\n        // create Dataitems\n        //this.log.debug(JSON.stringify(tempConfig));\n        const tempItem: PageItemDataItems['data'] = (await this.panel.statesControler.createDataItems(\n            tempConfig,\n            this,\n        )) as PageItemDataItems['data'];\n        this.dataItems = { ...config, data: tempItem } as PageItemDataItems;\n    }\n\n    async getPageItemPayload(): Promise<string> {\n        await this.controller.statesControler.activateTrigger(this);\n        this.lastPopupType = undefined;\n        if (this.dataItems && this.config) {\n            this.visibility = false;\n            this.triggerParent = true;\n            const entry = this.dataItems;\n            const message: Partial<MessageItem> = {};\n            message.intNameEntity = this.id;\n            switch (entry.type) {\n                case 'light': {\n                    const item = entry.data;\n                    message.type = 'light';\n\n                    const v = await tools.getValueEntryBoolean(item.entity1);\n                    const dimmer = (item.dimmer && item.dimmer.value && (await item.dimmer.value.getNumber())) ?? null;\n                    let rgb: RGB | null =\n                        (await tools.getRGBfromRGBThree(item)) ??\n                        (item.color && item.color.true && (await item.color.true.getRGBValue())) ??\n                        null;\n                    const nhue = (item.hue && (await item.hue.getNumber())) ?? null;\n                    if (rgb === null && nhue) rgb = Color.hsv2RGB(nhue, 1, 1) ?? null;\n                    message.icon = await tools.getIconEntryValue(item.icon, v, '', '');\n                    message.iconColor =\n                        (rgb && (await tools.GetIconColor(rgb, dimmer !== null ? (dimmer > 20 ? dimmer : 20) : v))) ??\n                        (await tools.GetIconColor(item.icon, dimmer !== null ? (dimmer > 20 ? dimmer : 20) : v)) ??\n                        '';\n                    if (v) {\n                        message.optionalValue = '1';\n                    } else {\n                        message.optionalValue = '0';\n                    }\n                    message.displayName = (await tools.getEntryTextOnOff(item.text1, v)) ?? message.displayName;\n                    return tools.getItemMesssage(message);\n                    break;\n                }\n                /*case 'shutter': {\n                    const item = entry.data;\n\n                    message.type = 'shutter';\n                    const t =\n                        'item.role' in template &&\n                        (template[this.config.role as keyof typeof template] as PageTypeUnionTemplate | undefined);\n                    if (!t) break;\n                    let value = await tools.getValueEntryNumber(item.entity1);\n                    if (value === null) {\n                        this.log.warn(`Entity ${this.config.role} has no value!`);\n                        break;\n                    }\n                    if (t.data.entity1 === 'invert') value = 100 - value;\n                    message.icon = await tools.getIconEntryValue(item.icon, value < 5, 'window-open');\n                    message.icon = t.data.icon\n                        ? await tools.getIconEntryValue(\n                              item.icon,\n                              value < 5,\n                              t.data.icon.true.value,\n                              t.data.icon.false.value,\n                          )\n                        : '';\n                    const optionalValue =\n                        t.data.optionalData === true\n                            ? [\n                                  Icons.GetIcon('arrow-up'), //up\n                                  Icons.GetIcon('stop'), //stop\n                                  Icons.GetIcon('arrow-down'), //down\n                                  'enable', // up status\n                                  'enable', // stop status\n                                  'enable', // down status\n                              ]\n                            : t.data.optionalData === undefined\n                              ? ['', '', '', 'disable', 'disable', 'disable']\n                              : t.data.optionalData === 'state' && item.valueList\n                                ? await item.valueList.getObject()\n                                : [\n                                      Icons.GetIcon(t.data.optionalData[0]),\n                                      Icons.GetIcon(t.data.optionalData[1]),\n                                      Icons.GetIcon(t.data.optionalData[2]),\n                                      t.data.optionalData[3],\n                                      t.data.optionalData[4],\n                                      t.data.optionalData[5],\n                                  ];\n                    const optionalValueC =\n                        Array.isArray(optionalValue) && optionalValue.every((a) => typeof a === 'string')\n                            ? optionalValue\n                            : ['', '', '', 'disable', 'disable', 'disable'];\n                    message.optionalValue = optionalValueC.join('|');\n                    message.displayName =\n                        (t.data.text && ((await tools.getEntryTextOnOff(item.text, true)) || t.data.text.true)) ??\n                        message.displayName;\n                    return tools.getItemMesssage(message);\n                    break;\n                }\n                case 'text': {\n                    const item = entry.data;\n                    message.type = 'text';\n                    const t =\n                        this.config.role in template &&\n                        (template[this.config.role as keyof typeof template] as PageTypeUnionTemplate | undefined);\n                    if (!t) break;\n                    let value = t.data.entity1 ? await tools.getValueEntryBoolean(item.entity1) : null;\n                    if (value !== null) {\n                        // gate works revese true is closed -> invert value\n                        if (t.data.entity1 === 'invert') value = !value;\n                        let icon = '';\n                        message.iconColor = await tools.GetIconColor(item.icon, value ?? true ? true : false);\n\n                        icon = t.data.icon\n                            ? await tools.getIconEntryValue(\n                                  item.icon,\n                                  value,\n                                  t.data.icon.true.value,\n                                  t.data.icon.false.value,\n                              )\n                            : '';\n                        if (t.data.optionalData) {\n                            if (typeof t.data.optionalData === 'string') {\n                                const arr = t.data.optionalData.split('?');\n                                if (arr.length > 0) {\n                                    message.optionalValue = !value && arr.length > 1 ? arr[1] : arr[0];\n                                }\n                            } else\n                                message.optionalValue = this.library.getTranslation(\n                                    (await tools.getEntryTextOnOff(item.text, value)) ?? '',\n                                );\n                        }\n                        message.displayName =\n                            (t.data.text && (await tools.getEntryTextOnOff(item.text, value))) ?? message.displayName;\n                        message.icon = Icons.GetIcon(icon);\n                        return tools.getItemMesssage(message);\n                    } else {\n                        this.log.error(`Missing data value for ${this.name}-${this.id} role:${this.config.role}`);\n                    }\n                    this.log.debug(JSON.stringify(message));\n                    break;\n                }\n                case 'number': {\n                    const item = entry.data;\n                    break;\n                }*/\n                case 'button': {\n                    /**\n                     * Alles was einen Druckfl\u00E4che sein kann. D\n                     */\n                    const item = entry.data;\n\n                    if (item.entity1 && item.entity1.value) {\n                        /*let value;\n                        if (item.entity1.value.type === 'string') {\n                        } else if (item.entity1.value.type === 'number') {\n                        } else if (item.entity1.value.type === 'boolean') {\n                            value = await tools.getValueEntryBoolean(item.entity1);\n                        }\n                        if (value === undefined) break;\n*/\n                        message.optionalValue = !!(item.setValue1 && (await item.setValue1.getBoolean())) ? '0' : '1';\n                        message.displayName =\n                            (await tools.getEntryTextOnOff(item.text, message.optionalValue === '1')) ?? 'test1';\n\n                        message.icon = await tools.getIconEntryValue(\n                            item.icon,\n                            message.optionalValue === '1',\n                            'home',\n                            'account',\n                        );\n                        message.iconColor = await tools.GetIconColor(item.icon, message.optionalValue === '1');\n                        return tools.getPayload(\n                            'button',\n                            message.intNameEntity,\n                            message.icon,\n                            message.iconColor,\n                            message.displayName,\n                            message.optionalValue,\n                        );\n                    }\n                    break;\n                }\n\n                case 'input_sel': {\n                    const item = entry.data;\n                    message.type = 'input_sel';\n                    const value =\n                        (await tools.getValueEntryNumber(item.entityInSel)) ??\n                        (await tools.getValueEntryBoolean(item.entityInSel));\n                    message.icon = await tools.getIconEntryValue(item.icon, !!(value ?? true), 'gesture-tap-button');\n\n                    message.iconColor =\n                        (await tools.GetIconColor(item.icon, value ?? true, 0, 100, Color.HMIOff)) ?? Color.HMIOn;\n\n                    message.optionalValue = (await tools.getEntryTextOnOff(item.text, !!value)) ?? 'PRESS';\n                    this.log.debug(JSON.stringify(message));\n                    return tools.getItemMesssage(message);\n\n                    break;\n                }\n                //case 'switch':\n                /*case 'volumeGroup': {\n                break;\n            }\n            case 'volume': {\n                break;\n            }\n            case 'info':\n            case 'humidity':\n            case 'temperature':\n            case 'value.temperature':\n            case 'value.humidity':\n            case 'sensor.door':\n            case 'sensor.window':\n            case 'thermostat': {\n                break;\n            }\n            case 'warning': {\n                break;\n            }\n            case 'ct': {\n                break;\n            }\n            case 'cie': {\n                break;\n            }\n            case 'motion': {\n                message.type = 'text';\n                const value = await tools.getValueEntryBoolean(item.data.entity1);\n                if (value !== null) {\n                    message.iconColor = await tools.GetIconColor(item.data.icon, value ?? true ? true : false);\n                    message.icon = await tools.getIconEntryValue(item.data.icon, value, 'motion-sensor');\n                    message.optionalValue = tools.getTranslation(this.library, value ? 'on' : 'off');\n                    message.displayName = (await tools.getEntryTextOnOff(item.data.text, value)) ?? message.displayName;\n                    return this.getItemMesssage(message);\n                } else {\n                    this.log.error(`Missing data value for ${this.name}-${id} role:${item.role}`);\n                }\n                break;\n            }\n\n            case 'button': {\n                let value = (item.data.setValue1 && (await item.data.setValue1.getBoolean())) ?? null;\n                if (value === null && item.role === 'buttonSensor') value = true;\n                if (value !== null) {\n                    message.type = item.role === 'buttonSensor' ? 'input_sel' : 'button';\n                    message.iconColor = await tools.GetIconColor(item.data.icon, value);\n                    message.icon = await tools.getIconEntryValue(item.data.icon, value, 'gesture-tap-button');\n                    message.displayName = (await tools.getEntryTextOnOff(item.data.text, value)) ?? '';\n                    message.optionalValue = (await tools.getValueEntryString(item.data.entity1)) ?? 'PRESS';\n                    return this.getItemMesssage(message);\n                } else {\n                    this.log.error(`Missing set value for ${this.name}-${id} role:${item.role}`);\n                }\n                break;\n            }\n            case 'timer': {\n                const value = (item.data.setValue1 && (await item.data.setValue1.getNumber())) ?? null;\n                if (value !== null) {\n                    message.type = 'timer';\n                    message.iconColor = await tools.GetIconColor(item.data.icon, value);\n                    message.icon = await tools.getIconEntryValue(item.data.icon, true, 'gesture-tap-button');\n                    message.optionalValue = (await tools.getEntryTextOnOff(item.data.text, true)) ?? 'PRESS';\n                    return this.getItemMesssage(message);\n                } else {\n                    this.log.error(`Missing set value for ${this.name}-${id} role:${item.role}`);\n                }\n                break;\n            }\n            case 'value.alarmtime': {\n                const value = (item.data.setValue1 && (await item.data.setValue1.getNumber())) ?? null;\n                if (value !== null) {\n                    message.type = 'timer';\n\n                    // das ist im Grunde wie vorher nur das die Farbe in aus der Konfiguration benutzt wird, wenn vorhanden\n                    message.iconColor =\n                        ((await tools.getValueEntryString(item.data.entity2)) ?? '') == 'paused'\n                            ? await tools.getIconEntryColor(\n                                  item.data.icon,\n                                  true,\n                                  String(Color.rgb_dec565(Color.colorScale10)),\n                              )\n                            : await tools.getIconEntryColor(\n                                  item.data.icon,\n                                  false,\n                                  String(Color.rgb_dec565(Color.colorScale0)),\n                              );\n                    message.displayName = new Date(\n                        ((await tools.getValueEntryNumber(item.data.entity1)) || 0) * 1000,\n                    ).toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n                    message.icon = await tools.getIconEntryValue(item.data.icon, true, 'timer-outline');\n                    message.optionalValue = (await tools.getEntryTextOnOff(item.data.text, true)) ?? 'PRESS';\n                    return this.getItemMesssage(message);\n                } else {\n                    this.log.error(`Missing set value for ${this.name}-${id} role:${item.role}`);\n                }\n                break;\n            }\n\n            case 'level.mode.fan': {\n                message.type = 'fan';\n                const value = (await tools.getValueEntryBoolean(item.data.entity1)) ?? false;\n                message.iconColor = await tools.GetIconColor(item.data.icon, value);\n                message.icon = await tools.getIconEntryValue(item.data.icon, value, 'fan');\n                message.optionalValue = value ? '1' : '0';\n                return this.getItemMesssage(message);\n                break;\n            }\n            case 'media.repeat': {\n                message.type = 'button';\n                const value: number | boolean | null =\n                    item.data.entity1 && item.data.entity1.value && item.data.entity1.value.type === 'number'\n                        ? await tools.getValueEntryNumber(item.data.entity1)\n                        : await tools.getValueEntryBoolean(item.data.entity1);\n                if (value !== null) {\n                    message.iconColor = await tools.GetIconColor(item.data.icon, !!value);\n                    if (value === 2) {\n                        message.icon = 'repeat-once';\n                    } else {\n                        message.icon = await tools.getIconEntryValue(\n                            item.data.icon,\n                            !!value,\n                            'repeat-variant',\n                            'repeat-off',\n                        );\n\n                        message.optionalValue = !!value ? '1' : '0';\n                        return this.getItemMesssage(message);\n                    }\n                }\n                break;\n            }\n            case 'text.list': {\n                message.type = 'input_sel';\n                const value: boolean | null =\n                    (item.data.entity1 &&\n                        item.data.entity1.value &&\n                        (await tools.getValueEntryBoolean(item.data.entity1))) ??\n                    null;\n                message.iconColor = await tools.getIconEntryColor(item.data.icon, value, Color.HMIOn, Color.HMIOff);\n                message.icon = await tools.getIconEntryValue(\n                    item.data.icon,\n                    value,\n                    'clipboard-list',\n                    'clipboard-list-outline',\n                );\n                message.displayName = (await tools.getEntryTextOnOff(item.data.text, value)) ?? '';\n                message.optionalValue = !!value ? '1' : '0';\n                return this.getItemMesssage(message);\n\n                break;\n            }\n            /*case 'lock': {\n                break;\n            }\n            case 'slider': {\n                break;\n            }\n            case 'switch.mode.wlan': {\n                break;\n            }\n            case 'media': {\n                break;\n            }\n            case 'timeTable': {\n                break;\n            }\n            case 'airCondition': {\n                break;\n            }*/\n            }\n        }\n        return '~~~~~';\n    }\n\n    getDetailPayload(message: Partial<entityUpdateDetailMessage>): string {\n        this.triggerParent = false;\n        if (!message.type) return '';\n        switch (message.type) {\n            case '2Sliders': {\n                let result: entityUpdateDetailMessage = {\n                    type: '2Sliders',\n                    icon: '',\n                    entityName: 'test',\n                    slidersColor: 'disable',\n                    buttonState: 'disable',\n                    slider1Pos: 'disable',\n                    slider2Pos: 'disable',\n                    hueMode: false,\n                    hue_translation: '',\n                    slider2Translation: '',\n                    slider1Translation: '',\n                    popup: false,\n                };\n                result = Object.assign(result, message);\n                return tools.getPayload(\n                    'entityUpdateDetail',\n                    result.entityName,\n                    result.icon ?? '',\n                    result.slidersColor,\n                    result.buttonState === 'disable' ? 'disable' : result.buttonState ? '1' : '0',\n                    String(result.slider1Pos),\n                    String(result.slider2Pos),\n                    result.hueMode ? 'enable' : 'disable',\n                    result.hue_translation,\n                    result.slider2Translation,\n                    result.slider1Translation,\n                    result.popup ? 'enable' : 'disable',\n                );\n                break;\n            }\n            case 'insel': {\n                let result: entityUpdateDetailMessage = {\n                    type: 'insel',\n                    entityName: '',\n                    textColor: String(Color.rgb_dec565(Color.White)),\n                    headline: '',\n                    list: '',\n                };\n                result = Object.assign(result, message);\n                return tools.getPayload(\n                    'entityUpdateDetail2',\n                    result.entityName,\n                    '',\n                    result.textColor,\n                    result.type,\n                    result.headline,\n                    result.list,\n                );\n                break;\n            }\n            case 'popupThermo': {\n                let result: entityUpdateDetailMessage = {\n                    type: 'popupThermo',\n                    entityName: '',\n                    headline: '',\n                    value: '',\n                    list: '',\n                };\n                result = Object.assign(result, message);\n                return tools.getPayload(result.headline, result.entityName, result.value, result.list);\n                break;\n            }\n        }\n        return '';\n    }\n\n    async GenerateDetailPage(mode: PopupType): Promise<string | null> {\n        if (!this.config || !this.dataItems) return null;\n        const entry = this.dataItems;\n        const message: Partial<entityUpdateDetailMessage> = {};\n        //const template = templatePageItems[mode][this.config.role];\n        message.entityName = this.id;\n        this.visibility = true;\n        this.lastPopupType = mode;\n        switch (mode) {\n            case 'popupLight': {\n                switch (this.config.role) {\n                    case 'light':\n                    case 'socket':\n                    case 'dimmer':\n                    case 'hue':\n                    case 'ct':\n                    case 'rgbSingle':\n                    case 'rgb':\n                    default: {\n                        message.type = '2Sliders';\n                        if (message.type !== '2Sliders' || entry.type !== 'light') return null;\n                        const item = entry.data;\n                        message.buttonState = (await tools.getValueEntryBoolean(item.entity1)) ?? 'disable';\n                        const dimmer = item.dimmer && item.dimmer.value && (await item.dimmer.value.getNumber());\n                        if (dimmer != null && item.dimmer) {\n                            item.dimmer.minScale;\n                            if (item.dimmer.minScale != undefined && item.dimmer.maxScale) {\n                                message.slider1Pos = Math.trunc(\n                                    Color.scale(\n                                        dimmer,\n                                        await item.dimmer.minScale.getNumber(),\n                                        await item.dimmer.maxScale.getNumber(),\n                                        100,\n                                        0,\n                                    ),\n                                );\n                            } else {\n                                message.slider1Pos = dimmer;\n                            }\n                        }\n\n                        message.slidersColor =\n                            (await tools.getIconEntryColor(item.icon, false, Color.White)) ?? 'disable';\n                        let rgb = null;\n                        switch (this.config.role) {\n                            case 'socket':\n                            case 'light':\n                            case 'dimmer':\n                            case 'ct':\n                                break;\n                            case 'hue': {\n                                const nhue = (item.hue && (await item.hue.getNumber())) ?? null;\n                                if (nhue) rgb = Color.hsv2RGB(nhue, 1, 1) ?? null;\n                                break;\n                            }\n                            case 'rgbSingle': {\n                                rgb = (await tools.getRGBfromRGBThree(item)) ?? null;\n                                break;\n                            }\n                            case 'rgb': {\n                                rgb = (item.color && item.color.true && (await item.color.true.getRGBValue())) ?? null;\n                                break;\n                            }\n                        }\n                        if (rgb !== null) {\n                            message.hueMode = true;\n                            message.slidersColor = await tools.GetIconColor(\n                                rgb,\n                                message.slider1Pos !== 'disable' && message.slider1Pos !== undefined\n                                    ? message.slider1Pos > 20\n                                        ? message.slider1Pos\n                                        : 20\n                                    : message.buttonState !== 'disable' && message.buttonState !== false,\n                            );\n                        } else {\n                            message.slider2Pos = 'disable';\n                        }\n\n                        if (rgb === null) {\n                            if (item.ct && item.ct.value) {\n                                const ct = await tools.getScaledNumber(item.ct);\n                                if (ct) {\n                                    message.slider2Pos = Math.trunc(ct);\n                                }\n                            }\n                        }\n                        message.popup = message.slider2Pos !== 'disable' && rgb !== null;\n\n                        message.slider1Translation =\n                            (item.text1 && item.text1.true && (await item.text1.true.getString())) ?? undefined;\n                        message.slider2Translation =\n                            (item.text2 && item.text2.true && (await item.text2.true.getString())) ?? undefined;\n                        message.hue_translation =\n                            (item.text3 && item.text3.true && (await item.text3.true.getString())) ?? undefined;\n\n                        if (message.slider1Translation !== undefined)\n                            message.slider1Translation = this.library.getTranslation(message.slider1Translation);\n                        if (message.slider2Translation !== undefined)\n                            message.slider2Translation = this.library.getTranslation(message.slider2Translation);\n                        if (message.hue_translation !== undefined)\n                            message.hue_translation = this.library.getTranslation(message.hue_translation);\n\n                        break;\n                    }\n                }\n                break;\n            }\n\n            case 'popupFan':\n            case 'popupThermo': {\n                if (entry.type !== 'input_sel') break;\n                const item = entry.data;\n                message.type = 'popupThermo';\n\n                if (message.type !== 'popupThermo') return null;\n\n                if (\n                    item.entityInSel &&\n                    item.entityInSel.value &&\n                    ['string', 'number'].indexOf(item.entityInSel.value.trueType() ?? '') &&\n                    item.entityInSel.value.getCommonStates()\n                ) {\n                    const states = item.entityInSel.value.getCommonStates();\n                    const value = await tools.getValueEntryString(item.entityInSel);\n                    if (value !== null && states && states[value] !== undefined) {\n                        message.headline = this.library.getTranslation(\n                            (item.headline && (await item.headline.getString())) ?? '',\n                        );\n                        const list: string[] = [];\n                        for (const a in states) {\n                            list.push(this.library.getTranslation(String(states[a])));\n                        }\n                        if (list.length > 0) {\n                            message.list = Array.isArray(list)\n                                ? list.map((a: string) => tools.formatInSelText(a)).join('?')\n                                : '';\n                            break;\n                        }\n                    }\n                }\n\n                message.value = (await tools.getValueEntryString(item.entityInSel)) ?? '';\n                message.headline = this.library.getTranslation(\n                    (item.headline && (await item.headline.getString())) ?? '',\n                );\n                let list = (item.valueList && (await item.valueList.getObject())) ??\n                    (item.valueList && (await item.valueList.getString())) ?? [\n                        '1',\n                        '2',\n                        '3',\n                        '4',\n                        '5',\n                        '6',\n                        '7',\n                        '8',\n                        '9',\n                        '10',\n                        '11',\n                        '12',\n                        '13',\n                    ];\n                if (list !== null) {\n                    if (typeof list === 'string') list = list.split('?');\n                } else list = [];\n                message.list = Array.isArray(list) ? list.map((a: string[]) => tools.formatInSelText(a)).join('?') : '';\n                break;\n            }\n            case 'popupInSel': {\n                if (entry.type !== 'input_sel' && entry.type !== 'light') break;\n                const item = entry.data;\n                message.type = 'insel';\n\n                if (message.type !== 'insel') return null;\n                if (\n                    item.entityInSel &&\n                    item.entityInSel.value &&\n                    ['string', 'number'].indexOf(item.entityInSel.value.trueType() ?? '') &&\n                    item.entityInSel.value.getCommonStates()\n                ) {\n                    const states = item.entityInSel.value.getCommonStates();\n                    const value = await tools.getValueEntryString(item.entityInSel);\n                    if (value !== null && states && states[value] !== undefined) {\n                        message.textColor = await tools.getEntryColor(item.color, !!value, Color.White);\n                        message.headline = this.library.getTranslation(\n                            (item.headline && (await item.headline.getString())) ?? '',\n                        );\n                        const list: string[] = [];\n                        for (const a in states) {\n                            list.push(this.library.getTranslation(String(states[a])));\n                        }\n                        if (list.length > 0) {\n                            message.list = Array.isArray(list)\n                                ? list.map((a: string) => tools.formatInSelText(a)).join('?')\n                                : '';\n                            break;\n                        }\n                    }\n                }\n                const value = (await tools.getValueEntryBoolean(item.entityInSel)) ?? true;\n                message.textColor = await tools.getEntryColor(item.color, value, Color.White);\n                message.headline = this.library.getTranslation(\n                    (item.headline && (await item.headline.getString())) ?? '',\n                );\n                let list = (item.valueList && (await item.valueList.getObject())) ??\n                    (item.valueList && (await item.valueList.getString())) ?? [\n                        '1',\n                        '2',\n                        '3',\n                        '4',\n                        '5',\n                        '6',\n                        '7',\n                        '8',\n                        '9',\n                        '10',\n                        '11',\n                        '12',\n                        '13',\n                    ];\n\n                /**\n                 * die Liste ist entweder ein mit ? getrennt der String oder ein Array\n                 */\n                if (list !== null) {\n                    if (typeof list === 'string') list = list.split('?');\n                } else list = [];\n                message.list = Array.isArray(list) ? list.map((a: string) => tools.formatInSelText(a)).join('?') : '';\n                break;\n            }\n        }\n\n        //if (template.type !== message.type) {\n        //    throw new Error(`Template ${template.type} is not ${message.type} for role: ${this.config.role}`);\n        //}\n        return this.getDetailPayload(message);\n\n        return null;\n    }\n\n    async delete(): Promise<void> {\n        this.visibility = false;\n        await this.controller.statesControler.deactivateTrigger(this);\n        await super.delete();\n    }\n\n    async setPopupAction(action: string, value: string): Promise<void> {\n        if (value === undefined || this.dataItems === undefined) return;\n        const entry = this.dataItems;\n        switch (action) {\n            case 'mode-insel':\n                {\n                    /**\n                     * Die Setzliste besteht aus 1 Arrays in Stringform mit trenner | und einem json mit trenner ? { id: t[0], value: t[1] }\n                     * oder { id: t[0], value: t[1], command: t[2]} command bitte in der funktion nachsehen. Hier sind meist nicht alle beschrieben\n                     *\n                     * Standardnutzung, NSPanelauswahl von z.B. Eintrag 2 benutzt das Element 2 aus diesem Array und setzt die ID auf den Wert value\n                     * 'flip': Liest den State mit ID ein, negiert den Wert und schreibt ihn wieder zur\u00FCck. string, number, boolean m\u00F6glich.\n                     */\n                    if (entry.type !== 'input_sel') break;\n\n                    const item = entry.data;\n                    if (\n                        item.entityInSel &&\n                        item.entityInSel.value &&\n                        ['string', 'number'].indexOf(item.entityInSel.value.trueType() ?? '') &&\n                        item.entityInSel.value.getCommonStates() &&\n                        !item.setList\n                    ) {\n                        const states = item.entityInSel.value.getCommonStates();\n                        //const value = await tools.getValueEntryString(item.entity1);\n                        if (value !== null && states !== undefined) {\n                            const list: string[] = [];\n                            for (const a in states) {\n                                list.push(this.library.getTranslation(String(a)));\n                            }\n                            if (list[parseInt(value)] !== undefined) {\n                                await item.entityInSel.value.setStateAsync(list[parseInt(value)]);\n                                break;\n                            }\n                        }\n                    }\n\n                    if (!item.setList) return;\n                    let list: listCommand[] | null = (await item.setList.getObject()) as listCommand[] | null;\n                    if (list === null) {\n                        const temp = await item.setList.getString();\n                        if (temp === null) return;\n                        list = temp.split('|').map((a: string): listCommand => {\n                            const t = a.split('?');\n                            return islistCommandUnion(t[2])\n                                ? { id: t[0], value: t[1], command: t[2] }\n                                : { id: t[0], value: t[1] };\n                        });\n                    }\n                    const v = parseInt(value);\n                    if (list[v]) {\n                        try {\n                            const obj = await this.adapter.getForeignObjectAsync(list[v].id);\n                            if (!obj || !obj.common || obj.type !== 'state') throw new Error('Dont get obj!');\n\n                            const type = obj.common.type;\n                            let newValue: any = null;\n                            switch (list[v].command) {\n                                case 'flip': {\n                                    const state = await this.adapter.getForeignStateAsync(list[v].id);\n                                    if (state) {\n                                        switch (typeof state.val) {\n                                            case 'string': {\n                                                switch (\n                                                    state.val as\n                                                        | 'ON'\n                                                        | 'OFF'\n                                                        | 'TRUE'\n                                                        | 'FALSE'\n                                                        | 'START'\n                                                        | 'STOP'\n                                                        | '0'\n                                                        | '1'\n                                                ) {\n                                                    case 'ON': {\n                                                        newValue = 'OFF';\n                                                        break;\n                                                    }\n                                                    case 'OFF': {\n                                                        newValue = 'ON';\n                                                        break;\n                                                    }\n                                                    case 'TRUE': {\n                                                        newValue = 'FALSE';\n                                                        break;\n                                                    }\n                                                    case 'FALSE': {\n                                                        newValue = 'TRUE';\n                                                        break;\n                                                    }\n                                                    case 'START': {\n                                                        newValue = 'STOP';\n                                                        break;\n                                                    }\n                                                    case 'STOP': {\n                                                        newValue = 'START';\n                                                        break;\n                                                    }\n                                                    case '0': {\n                                                        newValue = '1';\n                                                        break;\n                                                    }\n                                                    case '1': {\n                                                        newValue = '0';\n                                                        break;\n                                                    }\n                                                }\n                                                break;\n                                            }\n                                            case 'number':\n                                            case 'bigint': {\n                                                newValue = state.val === 1 ? 0 : 1;\n                                                break;\n                                            }\n                                            case 'boolean': {\n                                                newValue = !state.val;\n                                                break;\n                                            }\n\n                                            case 'symbol':\n                                            case 'undefined':\n                                            case 'object':\n                                            case 'function':\n                                                return;\n                                        }\n                                    }\n                                    break;\n                                }\n                                case undefined: {\n                                    newValue = this.adapter.library.convertToType(list[v].value, type);\n                                }\n                            }\n\n                            if (newValue !== null) {\n                                await this.adapter.setForeignStateAsync(\n                                    list[v].id,\n                                    newValue,\n                                    list[v].id.startsWith(this.adapter.namespace),\n                                );\n                                this.log.debug(`------------Set dp ${list[v].id} to ${String(newValue)}!`);\n                            } else {\n                                this.log.error(`Try to set a null value to ${list[v].id}!`);\n                            }\n                        } catch (e) {\n                            this.log.error(`Id ${list[v].id} is not valid!`);\n                        }\n                    } else {\n                    }\n                }\n                break;\n            case 'button': {\n                if (entry.type === 'button') {\n                    const item = entry.data;\n                    let value: any = (item.setNavi && (await item.setNavi.getString())) ?? null;\n                    if (value !== null) {\n                        this.panel.navigation.setTargetPageByName(value);\n                        break;\n                    }\n                    value = (item.setValue1 && (await item.setValue1.getBoolean())) ?? null;\n                    if (value !== null) {\n                        await item.setValue1!.setStateFlip();\n                    }\n                } else if (entry.type === 'light') {\n                    const item = entry.data;\n                    item.entity1 && item.entity1.value && (await item.entity1.value.setStateFlip());\n                }\n                break;\n            }\n            case 'brightnessSlider': {\n                if (entry.type === 'light') {\n                    const item = entry.data;\n                    if (item && item.dimmer && item.dimmer.value && item.dimmer.value.writeable) {\n                        const dimmer = await tools.getScaledNumber(item.dimmer);\n                        if (dimmer !== null && String(dimmer) != value)\n                            await tools.setScaledNumber(item.dimmer, parseInt(value));\n                    } else {\n                        this.log.warn('Dimmer is not writeable!');\n                    }\n                }\n                break;\n            }\n            case 'OnOff': {\n                if (entry.type === 'light') {\n                    const item = entry.data;\n                    if (item && item.entity1 && item.entity1.value && item.entity1.value.writeable) {\n                        await item.entity1.value.setStateAsync(value === '1');\n                    } else {\n                        this.log.warn('entity1 is not writeable!');\n                    }\n                }\n                break;\n            }\n            case 'colorWheel': {\n                if (entry.type === 'light') {\n                    const item = entry.data;\n                    if (item && this.config && item.entity1 && item.entity1.value && item.entity1.value.writeable) {\n                        switch (this.config.role) {\n                            case 'socket':\n                            case 'light':\n                            case 'dimmer':\n                            case 'ct':\n                                break;\n                            case 'hue':\n                                await tools.setHuefromRGB(item, Color.resultToRgb(value));\n                                break;\n                            case 'rgbSingle': {\n                                const rgb = Color.resultToRgb(value);\n                                await tools.setRGBThreefromRGB(item, rgb);\n                                break;\n                            }\n                            case 'rgb': {\n                                const rgb = Color.resultToRgb(value);\n                                if (Color.isRGB(rgb)) {\n                                    item.color &&\n                                        item.color.true &&\n                                        (await item.color.true.setStateAsync(JSON.stringify(rgb)));\n                                }\n\n                                break;\n                            }\n                        }\n                    } else {\n                        this.log.warn('color value is not writeable!');\n                    }\n                }\n                break;\n            }\n\n            /*let rgb = null;\n                        switch (this.config.role) {\n                            case 'socket':\n                            case 'light':\n                            case 'dimmer':\n                            case 'ct':\n                                break;\n                            case 'hue':\n                                rgb = (await tools.getDecfromHue(item)) ?? null;\n                                break;\n                            case 'rgbSingle':\n                            case 'rgb':\n                                rgb = (await tools.getDecfromRGBThree(item)) ?? null;\n                                break;\n                        }\n                        if (rgb !== null) {\n                            message.hueMode = true;\n                            message.slidersColor = rgb;\n                        } else {\n                            message.slider2Pos = 'disable';\n                        }\n\n                        if (rgb === null) {\n                            if (item.ct && item.ct.value) {\n                                const ct = await tools.getValueEntryNumber(item.ct);\n                                if (ct) {\n                                    message.slider2Pos = Math.trunc(ct);\n                                }\n                            }\n                        }*/\n        }\n    }\n    protected async onStateTrigger(): Promise<void> {\n        if (this.lastPopupType) {\n            const msg = await this.GenerateDetailPage(this.lastPopupType);\n            if (msg) this.sendToPanel(msg);\n        }\n    }\n}\n"],
  "mappings": "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",
  "names": ["list", "value"]
}
